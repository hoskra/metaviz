<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="canvas">
  <meta name="author" content="hoskra">
  <script src="libs/p5.min.js" type="text/javascript" defer></script>
  <script src="libs/d3.v3.min.js" type="text/javascript" defer></script>

  <title>Webgl</title>
  <style>
    body {
      margin: 0;
    }
  </style>
</head>

<body>
</body>
<script>

// source: https://twitter.com/hisadan/status/1486739558146646018

let n = 0;
let W = 600;
let z;


function setup(){
  createCanvas(W,W,WEBGL);
  z = (W/2)/tan(PI/6);
}

function dp(_x,_y,_z, rad=2) {
  push();
  translate(_x,_y,_z);
  sphere(rad);
  pop();
}

function draw(){
  // ambientLight(0,0,255);
  // clear();
  noStroke();
  // z += cos(n)
  const c = d3.interpolate("blue", "pink")
  // fill(c(sin(n)))
  camera(0,0,z,0,0,0,0,1,0);
  // camera(cos(n)*500,400,200,0,0,0,0,0,-1);
  n+=0.01;
  
  // plane(100, 100);
  
  background(220);

  // ambientMaterial(0,0,255);
  
  up=2000;
  side=2000;

  push()
  translate(0,100,300)
  rotateZ(PI)
  wid=20;
  hei=80;

  for(i=1;i<8;i++){
    translate(0,0,-i*100)
    rotateZ(i)

    fill(c(i/4))
    triangle(
    0, sin( i + frameCount * 0.1) * 10, i, 
    60, 60, i, 
    -60, 60, i);


    // rect(0,0,10,200+10*cos(n*i))
    // rect(0,0,10,200+10*cos(n*i))
    // translate(0,0,1)
    // circle(5,80+10*cos(n*i),30)
    // translate(0,0,1)
    // circle(15,58+10*cos(n*i),20)
    // translate(0,0,1)
    // circle(-10,60+10*cos(n*i),40)
    wid+=3;
    hei += 30*sin(i*n) + i*10;
    // beginShape(TESS);
    // vertex(100,     -up);
    // vertex(100-wid, -up);
    // vertex(100-wid, hei-wid);
    // vertex(-side, hei-wid);
    // vertex(-side, hei);
    // vertex(100-wid, hei);
    // vertex(100-wid, up);
    // vertex(100, up);
    // endShape(CLOSE);
  }
  pop()

  push()
  translate(0,100,-1301)
  rotateZ(PI)
  rotateY(PI)
  wid=20;
  hei=10;
  // rotateZ(PI)
  // rotateY(PI)

  for(i=1;i<8;i++){
    rotateZ(i)
    
    translate(0,0,-i*100)
    fill(c(i/4))
    wid+=3;
    hei += 30*sin(i*n) +i*10;


    triangle(
    0, sin( i + frameCount * 0.1) * 10, i, 
    60, 60, i, 
    -60, 60, i);

    // beginShape(TESS);
    // vertex(100, -up);
    // vertex(100-wid, -up);
    // vertex(100-wid, hei-wid);
    // vertex(-side, hei-wid);
    // vertex(-side, hei);
    // vertex(100-wid, hei);
    // vertex(100-wid, up);
    // vertex(100, up);
    // endShape(CLOSE);
  }
  pop()
  
  // push()
  // translate(-100,100,-100)
  // for(i=0;i<10;i++){
  //   translate(0,-i*6,0)
  //   rotateZ(cos(n-i))
  //   rotateY(sin(n+i))
  //   // rotateX(tan(n+i))
  //   box(10)
  // }
  // pop()

  // center=10
  
  // beginShape(QUAD_STRIP);
  // vertex(120,100,300)
  // vertex(center,center,-100)
  // vertex(-center,center,-100)  
  // vertex(-120,100,300)
  // endShape(CLOSE);

  
}

</script>
</html>