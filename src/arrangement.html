<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="canvas">
  <meta name="author" content="hoskra">
  <script src="libs/p5.min.js" type="text/javascript" defer></script>
  <script src="libs/d3-delaunay@6.js" type="text/javascript" defer></script>
  <title>Spiral</title>
  <style>
    body {
      margin: 0;
    }
    main {
      display:flex;
      height: 100vh;
      width: 100vw;
    }
    canvas {
      display: block;
      margin: auto;
      border: 1em solid black;
    }
  </style>
</head>

<body>
</body>
<script>
let points = []
let lines = []

let cnt = 3
let W = 600
let f = 0


function drawPlane(x, y, nameX, nameY) {
  textSize(10);
  push()
  translate(x, y)
  line(10, W/2, W-10, W/2) // horizontal
  line(W/2, 10, W/2, W-10) // vertical
  text(nameX, W-20, W/2-20)
  text(nameY, W/2-20, 20)
  pop()
}

function setup() {
  createCanvas(2*W, W);

  a = random(-1, 1)
  b = random(-1, -1)
  points[0] = {x: -20*a, y: -20*b}
  points[1] = {x: 20*a, y: 20*b}
  points[2] = {x: 50*a, y: 50*b}
  points[2] = {x: -50*a, y: -50*b}


  for(let i=0; i<0; i++) {
    let x = random(-W/2, W/2);
    let y = random(-W/2, W/2);
    points.push({x, y});
  }

  // noLoop()
}

function pointXY(x, y, label) {
  push()
  translate(W/2, W/2);
  circle(x,y, 10)
  // label = "[" + floor(x) + "," + floor(y) + "]"
  let offX = x > W-30 ? -45 : 10;
  let offY = 0;

  text(label, x+offX, y+offY)
  pop()
}

function lineAB(x, y, label) {
  push()
  stroke(0)
  translate(3*W/2, W/2);
  let _a = -W/2
  let _b = W/4

  // b = x*a - y
  rotate(tan(x))
  // rotate(radians(180))
  translate(y, 0)

  line(0, W/2, 0, -W/2)

  rotate(-tan(x))

  let offX = x > W-30 ? -45 : 10;
  let offY = 0;
  text(label, a+offX, b+offY)


  pop()
}

function draw() {
  f+=0.1
  background(220);
  stroke(160)
  drawPlane(0, 0, "x", "y")
  drawPlane(W, 0, "a", "b")


  for(let i=0; i<points.length; i++) {
    let x = points[i].x
    let y = points[i].y


    pointXY(x,y, "p"+i)
    lineAB(x,y,  "p"+i)
  }

  // points[0].y += sin(f)
  // points[0].x += sin(f)

  // points[1].y += cos(f)
  // points[1].x += cos(f)*0.001



}

</script>
</html>